<!DOCTYPE html>
<html>
<head>
    <title>Отправка данных на сервер</title>
</head>
<body>

<h2>Добавление проекта</h2>

<form id="projectForm" onsubmit="addProject(event)">
    
    <label for="imageUrl">URL изображения:</label><br>
    <input required type="text" id="imageUrl" name="imageUrl"><br>

    <label for="name">Название:</label><br>
    <input required type="text" id="name" name="name"><br>

    <label for="category">Категория:</label><br>
    <input required type="text" id="category" name="category"><br>

    <label for="projectType">Тип проекта:</label><br>
    <input required type="text" id="projectType" name="projectType"><br>

    <label for="year">Год:</label><br>
    <input required type="text" id="year" name="year" pattern="\d{4}"><br>

    <label for="ageCategory">Возрастная категория:</label><br>
    <input required type="text" id="ageCategory" name="ageCategory"><br>

    <label for="durationMinutes">Продолжительность (в минутах):</label><br>
    <input required type="text" id="durationMinutes" name="durationMinutes" pattern="\d+"><br>

    <label for="keywords">Ключевые слова:</label><br>
    <input required type="text" id="keywords" name="keywords"><br>

    <label for="description">Описание:</label><br>
    <textarea required id="description" name="description"></textarea><br>

    <label for="director">Режиссер:</label><br>
    <input required type="text" id="director" name="director"><br>

    <label for="producer">Продюсер:</label><br>
    <input required type="text" id="producer" name="producer"><br>

    <input type="submit" value="Добавить проект">
</form>

<script>
    function addProject(event) {
        event.preventDefault(); // предотвратить стандартное поведение отправки формы

        const project = {
            imageUrl: document.getElementById('imageUrl').value,
            name: document.getElementById('name').value,
            category: document.getElementById('category').value,
            projectType: document.getElementById('projectType').value,
            year: parseInt(document.getElementById('year').value),
            ageCategory: document.getElementById('ageCategory').value,
            durationMinutes: parseInt(document.getElementById('durationMinutes').value),
            keywords: document.getElementById('keywords').value,
            description: document.getElementById('description').value,
            director: document.getElementById('director').value,
            producer: document.getElementById('producer').value
        };

        const token = localStorage.getItem("token"); // Замените на ваш JWT токен

        fetch('/api/create/project', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${token}`
            },
            body: JSON.stringify(project)
        })
        .then(response => {
            if (!response.ok) {
                throw new Error(`${response.status}: ${response.statusText}`);
            }
            return response.json();
        })
        .then(data => {
            alert(`Success: ${data.message}`);
        })
        .catch((error) => {
            alert(`Error: ${error.message}`);
        });
    }
</script>

</body>
</html>
